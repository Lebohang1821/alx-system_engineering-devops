#!/usr/bin/env bash

# It transfers file from our client to server

if [ $# -lt 3 ]; then
    echo "Usage: $0 PATH_TO_FILE IP USERNAME [PATH_TO_SSH_KEY]";
    exit 1;
fi

# It sets default SSH key path if not provided
SSH_KEY="${4:-}"

# it uses double quotes to handle filenames with spaces
scp_options="-o StrictHostKeyChecking=no"
scp_command="scp $scp_options"

# It uses consistent quotes and indentation
if [ -n "$SSH_KEY" ]; then
    $scp_command -i "$SSH_KEY" "$1" "$3@$2":~/
else
    $scp_command "$1" "$3@$2":~/
fi
